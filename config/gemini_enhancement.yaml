# Gemini Test Enhancement Configuration
# This file contains all configuration parameters for the Gemini-powered
# IELTS test enhancement pipeline.

# Gemini API Configuration
gemini:
  # Model to use for enhancement (gemini-2.5-flash recommended for cost/performance)
  model: "gemini-2.5-flash"
  
  # Environment variable name containing the API key
  # Set this in your .env file or system environment
  api_key_env: "GEMINI_API_KEY"
  
  # Temperature for generation (0.0-1.0)
  # Lower values = more consistent/deterministic output
  # Recommended: 0.1 for structured data processing
  temperature: 0.1
  
  # Maximum tokens in the response
  # Gemini 2.5 Flash supports up to 8192 output tokens
  max_output_tokens: 8192

# Rate Limiting Configuration
# These limits ensure compliance with Gemini API quotas
rate_limits:
  # Maximum requests per minute (Gemini free tier: 15 RPM)
  requests_per_minute: 15
  
  # Maximum tokens per minute (Gemini free tier: 250K TPM input)
  tokens_per_minute: 250000
  
  # Maximum requests per day (Gemini free tier: 1000 RPD)
  requests_per_day: 1000
  
  # Minimum delay between consecutive requests (seconds)
  # 4 seconds ensures ~15 requests per minute with buffer
  delay_between_requests: 4.0

# Processing Configuration
processing:
  # Number of tests to process in a single batch run
  # Recommended: 5-10 to stay within rate limits and test incrementally
  batch_size: 5
  
  # Maximum number of retry attempts for failed API calls
  max_retries: 3
  
  # Initial delay before retry (seconds)
  # Uses exponential backoff: retry_delay * (2 ^ attempt)
  retry_delay: 5.0
  
  # Timeout for API requests (seconds)
  timeout: 60

# Path Configuration
paths:
  # Input directory containing parsed test JSON files
  # Structure: {input_dir}/{listening|reading}/practice/test_XX.json
  input_dir: "web_scraping/parsed"
  
  # Output directory for enhanced test JSON files
  # Enhanced files will mirror the input directory structure
  output_dir: "web_scraping/parsed_enhanced"
  
  # Progress tracking file for batch processing
  # Allows resuming interrupted batch runs
  progress_file: "enhancement_progress.json"
  
  # Directory for log files
  # Separate log files created for each batch run
  log_dir: "logs/enhancement"

# Validation Configuration
validation:
  # Strict mode: Fail on any validation error
  # If false, warnings are logged but processing continues
  strict_mode: true
  
  # Save invalid/failed enhancements for debugging
  # Files saved to {output_dir}/debug/
  save_invalid: true
  
  # Dry run mode: Validate without saving changes
  # Useful for testing configuration and prompts
  dry_run: false
